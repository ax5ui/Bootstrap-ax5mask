"use strict";!function(){var t=ax5.ui,n=ax5.ui.root,s=ax5.util,i="ax5mask",e="0.7.1",a=function(){var t,a=this;n&&n.call(this),this.name=i,this.version=e,this.instanceId=ax5.getGuid(),this.config={theme:"",target:jQuery(document.body).get(0)},this.maskContent="",this.status="off",t=this.config;var o=function(t,n){return t&&t.onStateChanged?t.onStateChanged.call(n,n):this.onStateChanged&&this.onStateChanged.call(n,n),t=null,n=null,!0},l=function(){return'\n                <div class="ax-mask {{theme}}" id="{{maskId}}">\n                    <div class="ax-mask-bg"></div>\n                    <div class="ax-mask-content">\n                        <div class="ax-mask-body">\n                        {{{body}}}\n                        </div>\n                    </div>\n                </div>\n                '},h=function(t){this.maskContent=t};this.init=function(){this.onStateChanged=t.onStateChanged,this.onClick=t.onClick,this.config.content&&h.call(this,this.config.content)},this.open=function(t){"on"===this.status&&this.close(),t&&t.content&&h.call(this,t.content),a.maskConfig={},jQuery.extend(!0,a.maskConfig,this.config,t);var n,s=a.maskConfig,i=s.target,e=jQuery(i),u="ax-mask-"+ax5.getGuid(),c={},d={},m=l(),r=ax5.mustache.render(m,{theme:s.theme,maskId:u,body:this.maskContent});return jQuery(document.body).append(r),i&&i!==jQuery(document.body).get(0)&&(c={position:s.position||"absolute",left:e.offset().left,top:e.offset().top,width:e.outerWidth(),height:e.outerHeight()},"undefined"!=typeof a.maskConfig.zIndex&&(c["z-index"]=a.maskConfig.zIndex),e.addClass("ax-masking")),this.$mask=n=jQuery("#"+u),this.$target=e,this.status="on",n.css(c),this.onClick&&n.click(function(){d={self:this,state:"open",type:"click"},this.onClick.call(d,d)}),o.call(this,null,{self:this,state:"open"}),t=null,s=null,i=null,e=null,u=null,n=null,c=null,d=null,m=null,r=null,this},this.close=function(){return this.$mask&&(this.$mask.remove(),this.$target.removeClass("ax-masking"),o.call(this,null,{self:this,state:"close"})),this},this.main=function(){root.mask_instance=root.mask_instance||[],root.mask_instance.push(this),arguments&&s.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};t.mask=function(){return s.isFunction(n)&&(a.prototype=new n),a}()}();